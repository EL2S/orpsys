{% extends 'base.html' %}
{% load static %}
{% block script %}dashboard/view_dashboard.js{% endblock %}
{% block content %}

<main class="container mx-auto px-4 py-8 space-y-8">
  <div dir="ltr" data-orientation="horizontal" data-slot="tabs" class="flex flex-col gap-2 w-full">

    <!-- Onglets -->
    <div role="tablist" aria-orientation="horizontal" data-slot="tabs-list"
      class="bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px] mb-4"
      tabindex="0">

      <button type="button" role="tab" aria-selected="true"
        aria-controls="radix-_r_48_-content-modules" data-state="active"
        id="radix-_r_48_-trigger-modules" data-slot="tabs-trigger"
        class="data-[state=active]:bg-background dark:data-[state=active]:text-foreground 
               focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring 
               dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 
               text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 
               items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 
               text-sm font-medium whitespace-nowrap transition-[color,box-shadow] 
               focus-visible:ring-[3px] focus-visible:outline-1">
        Modules
      </button>
    </div>

    <!-- Contenu modules -->
    <div data-state="active" role="tabpanel"
      aria-labelledby="radix-_r_48_-trigger-modules"
      id="radix-_r_48_-content-modules"
      class="flex-1 outline-none">

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">

        {% if 'noyau.view_employer' in user.get_all_permissions %}
        <!-- Employés -->
        <a href="{% url 'view_employer' %}" data-slot="card"
          class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm 
                 hover:shadow-lg transition-all duration-200 cursor-pointer group border-muted/60 
                 hover:border-primary/20">

          <div data-slot="card-header"
            class="@container/card-header grid auto-rows-min items-start gap-2 px-6 space-y-4">

            <div class="w-14 h-14 rounded-2xl bg-blue-50 flex items-center justify-center 
                        group-hover:scale-110 transition-transform duration-200 shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                fill="none" stroke="currentColor" stroke-width="2"
                class="lucide lucide-users h-7 w-7 text-blue-600">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
            </div>

            <div>
              <div class="font-semibold text-xl">Employés</div>
              <div class="text-muted-foreground text-sm mt-1">Gestion des employés</div>
            </div>
          </div>

          <div data-slot="card-content" class="px-6">
            <div class="flex items-center text-sm font-medium text-primary opacity-0 
                        group-hover:opacity-100 transition-opacity -translate-x-2 
                        group-hover:translate-x-0 duration-200">
              Accéder au module →
            </div>
          </div>
        </a>
        {% endif %}
        {% if 'noyau.view_attendance' in user.get_all_permissions %}
        <!-- Pointage -->
        <a href="{% url 'view_attendance' %}" class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm 
                 cursor-pointer group hover:shadow-lg transition-all duration-200 border-muted/60 
                 hover:border-primary/20">

          <div data-slot="card-header"
            class="@container/card-header grid auto-rows-min items-start gap-2 px-6 space-y-4">
            <div class="w-14 h-14 rounded-2xl bg-green-50 flex items-center justify-center group-hover:scale-110 transition-transform duration-200 shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                fill="none" stroke="currentColor" stroke-width="2"
                class="lucide lucide-clock h-7 w-7 text-green-600">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
              </svg>
            </div>
            <div>
              <div class="font-semibold text-xl">Pointage</div>
              <div class="text-muted-foreground text-sm mt-1">Heures de travail</div>
            </div>
          </div>

          <div data-slot="card-content" class="px-6">
            <div class="flex items-center text-sm font-medium text-primary opacity-0 
                        group-hover:opacity-100 transition-opacity -translate-x-2 
                        group-hover:translate-x-0 duration-200">
              Accéder au module →
            </div>
          </div>
        </a>
        {% endif %}
        {% if 'noyau.view_leave' in user.get_all_permissions %}
        <!-- Congés -->
        <a href="{% url 'view_leave' %}" data-slot="card"
          class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm 
                 cursor-pointer group hover:shadow-lg transition-all duration-200 border-muted/60 
                 hover:border-primary/20">

          <div data-slot="card-header"
            class="@container/card-header grid auto-rows-min items-start gap-2 px-6 space-y-4">
            <div class="w-14 h-14 rounded-2xl bg-purple-50 flex items-center justify-center group-hover:scale-110 transition-transform duration-200 shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                fill="none" stroke="currentColor" stroke-width="2"
                class="lucide lucide-calendar h-7 w-7 text-purple-600">
                <path d="M8 2v4"></path>
                <path d="M16 2v4"></path>
                <rect width="18" height="18" x="3" y="4" rx="2"></rect>
                <path d="M3 10h18"></path>
              </svg>
            </div>
            <div>
              <div class="font-semibold text-xl">Congés</div>
              <div class="text-muted-foreground text-sm mt-1">Demandes de congés</div>
            </div>
          </div>

          <div data-slot="card-content" class="px-6">
            <div class="flex items-center text-sm font-medium text-primary opacity-0 
                        group-hover:opacity-100 transition-opacity -translate-x-2 
                        group-hover:translate-x-0 duration-200">
              Accéder au module →
            </div>
          </div>
        </a>
        {% endif %}
        {% if 'noyau.view_salarie' in user.get_all_permissions %}
        <!-- Salaires -->
        <a href="{% url 'view_salarie' %}" data-slot="card"
          class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm 
                 cursor-pointer group hover:shadow-lg transition-all duration-200 border-muted/60 
                 hover:border-primary/20">

          <div data-slot="card-header"
            class="@container/card-header grid auto-rows-min items-start gap-2 px-6 space-y-4">
            <div class="w-14 h-14 rounded-2xl bg-yellow-50 flex items-center justify-center group-hover:scale-110 transition-transform duration-200 shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                fill="none" stroke="currentColor" stroke-width="2"
                class="lucide lucide-dollar-sign h-7 w-7 text-yellow-600">
                <line x1="12" x2="12" y1="2" y2="22"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </div>
            <div>
              <div class="font-semibold text-xl">Salaires</div>
              <div class="text-muted-foreground text-sm mt-1">Gestion de la paie</div>
            </div>
          </div>

          <div data-slot="card-content" class="px-6">
            <div class="flex items-center text-sm font-medium text-primary opacity-0 
                        group-hover:opacity-100 transition-opacity -translate-x-2 
                        group-hover:translate-x-0 duration-200">
              Accéder au module →
            </div>
          </div>
        </a>
        {% endif %}
        <!-- Caisse -->
        {% if 'noyau.view_pos' in user.get_all_permissions %}
        <a href="{% url 'view_pos' %}" data-slot="card"
          class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm 
                 cursor-pointer group hover:shadow-lg transition-all duration-200 border-muted/60 
                 hover:border-primary/20">

          <div data-slot="card-header"
            class="@container/card-header grid auto-rows-min items-start gap-2 px-6 space-y-4">

            <div class="w-14 h-14 rounded-2xl bg-red-50 flex items-center justify-center group-hover:scale-110 transition-transform duration-200 shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                fill="none" stroke="currentColor" stroke-width="2"
                class="lucide lucide-shopping-cart h-7 w-7 text-red-600">
                <circle cx="8" cy="21" r="1"></circle>
                <circle cx="19" cy="21" r="1"></circle>
                <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"></path>
              </svg>
            </div>

            <div>
              <div class="font-semibold text-xl">Caisse</div>
              <div class="text-muted-foreground text-sm mt-1">Point de vente</div>
            </div>
          </div>

          <div data-slot="card-content" class="px-6">
            <div class="flex items-center text-sm font-medium text-primary opacity-0 
                        group-hover:opacity-100 transition-opacity -translate-x-2 
                        group-hover:translate-x-0 duration-200">
              Accéder au module →
            </div>
          </div>
        </a>
        {% endif %}
        {% if 'noyau.view_rawmaterial' in user.get_all_permissions %}
        <!-- Stock -->
        <a href="{% url 'view_rawmaterial' %}" data-slot="card"
          class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm 
                 cursor-pointer group hover:shadow-lg transition-all duration-200 border-muted/60 
                 hover:border-primary/20">

          <div data-slot="card-header"
            class="@container/card-header grid auto-rows-min items-start gap-2 px-6 space-y-4">
            <div class="w-14 h-14 rounded-2xl bg-orange-50 flex items-center justify-center group-hover:scale-110 transition-transform duration-200 shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                fill="none" stroke="currentColor" stroke-width="2"
                class="lucide lucide-package h-7 w-7 text-orange-600">
                <path d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"></path>
                <path d="M12 22V12"></path>
                <path d="m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7"></path>
                <path d="m7.5 4.27 9 5.15"></path>
              </svg>
            </div>
            <div>
              <div class="font-semibold text-xl">Stock</div>
              <div class="text-muted-foreground text-sm mt-1">Gestion des stocks</div>
            </div>
          </div>

          <div data-slot="card-content" class="px-6">
            <div class="flex items-center text-sm font-medium text-primary opacity-0 
                        group-hover:opacity-100 transition-opacity -translate-x-2 
                        group-hover:translate-x-0 duration-200">
              Accéder au module →
            </div>
          </div>
        </a>
        {% endif %}
        {% if 'noyau.view_loyalty' in user.get_all_permissions %}
        <!-- Fidélité -->
        <a href="{% url 'view_loyalty' %}" data-slot="card"
          class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm 
                 cursor-pointer group hover:shadow-lg transition-all duration-200 border-muted/60 
                 hover:border-primary/20">

          <div data-slot="card-header"
            class="@container/card-header grid auto-rows-min items-start gap-2 px-6 space-y-4">

            <div class="w-14 h-14 rounded-2xl bg-pink-50 flex items-center justify-center group-hover:scale-110 transition-transform duration-200 shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                fill="none" stroke="currentColor" stroke-width="2"
                class="lucide lucide-credit-card h-7 w-7 text-pink-600">
                <rect width="20" height="14" x="2" y="5" rx="2"></rect>
                <line x1="2" x2="22" y1="10" y2="10"></line>
              </svg>
            </div>

            <div>
              <div class="font-semibold text-xl">Fidélité</div>
              <div class="text-muted-foreground text-sm mt-1">Cartes de fidélité</div>
            </div>
          </div>

          <div data-slot="card-content" class="px-6">
            <div class="flex items-center text-sm font-medium text-primary opacity-0 
                        group-hover:opacity-100 transition-opacity -translate-x-2 
                        group-hover:translate-x-0 duration-200">
              Accéder au module →
            </div>
          </div>
        </a>
        {% endif %}
        {% if 'noyau.view_saleproduct' in user.get_all_permissions %}
        <a href="{% url 'view_saleproduct' %}" data-slot="card"
          class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm 
                 cursor-pointer group hover:shadow-lg transition-all duration-200 border-muted/60 
                 hover:border-primary/20">

          <div data-slot="card-header"
            class="@container/card-header grid auto-rows-min items-start gap-2 px-6 space-y-4">
            <div class="w-14 h-14 rounded-2xl bg-slate-50 flex items-center justify-center group-hover:scale-110 transition-transform duration-200 shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                fill="none" stroke="currentColor" stroke-width="2"
                class="lucide lucide-credit-card h-7 w-7 text-slate-600">
                  <path d="m15 11-1 9"></path>
                  <path d="m19 11-4-7"></path>
                  <path d="M2 11h20"></path>
                  <path d="m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4"></path>
                  <path d="M4.5 15.5h15"></path>
                  <path d="m5 11 4-7"></path>
                  <path d="m9 11 1 9"></path>
              </svg>
            </div>
            <div>
              <div class="font-semibold text-xl">Produits</div>
              <div class="text-muted-foreground text-sm mt-1">Gestion des produits</div>
            </div>
          </div>

          <div data-slot="card-content" class="px-6">
            <div class="flex items-center text-sm font-medium text-primary opacity-0 
                        group-hover:opacity-100 transition-opacity -translate-x-2 
                        group-hover:translate-x-0 duration-200">
              Accéder au module →
            </div>
          </div>
        </a>
        {% endif %}
        {% if 'noyau.view_production' in user.get_all_permissions %}
        <a href="{% url 'view_production' %}" data-slot="card"
          class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm 
                 cursor-pointer group hover:shadow-lg transition-all duration-200 border-muted/60 
                 hover:border-primary/20">

          <div data-slot="card-header"
            class="@container/card-header grid auto-rows-min items-start gap-2 px-6 space-y-4">
            <div class="w-14 h-14 rounded-2xl bg-orange-50 flex items-center justify-center group-hover:scale-110 transition-transform duration-200 shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                fill="none" stroke="currentColor" stroke-width="2"
                class="lucide lucide-credit-card h-7 w-7 text-orange-600">
                    <path d="M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z"></path>
                    <path d="M6 17h12"></path>
                  </svg>
            </div>
            <div>
              <div class="font-semibold text-xl">Production</div>
              <div class="text-muted-foreground text-sm mt-1">Catalogue des produits</div>
            </div>
          </div>

          <div data-slot="card-content" class="px-6">
            <div class="flex items-center text-sm font-medium text-primary opacity-0 
                        group-hover:opacity-100 transition-opacity -translate-x-2 
                        group-hover:translate-x-0 duration-200">
              Accéder au module →
            </div>
          </div>
        </a>
        {% endif %}
      </div>
    </div>

    </div>

  </div>
</main>

{% endblock %}
